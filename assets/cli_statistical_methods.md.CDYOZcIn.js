import{_ as i,o as a,c as t,a2 as e}from"./chunks/framework.CUre4L63.js";const g=JSON.parse(`{"title":"Statistical Methods","description":"Statistical analysis methods used in VITALS regression testing including Welch's t-test, Mann-Whitney U, permutation tests, and effect size calculations.","frontmatter":{"title":"Statistical Methods","description":"Statistical analysis methods used in VITALS regression testing including Welch's t-test, Mann-Whitney U, permutation tests, and effect size calculations.","head":[["meta",{"name":"keywords","content":"statistical methods, Welch t-test, Mann-Whitney U test, permutation test, Cohen's d, effect size, hypothesis testing"}]]},"headers":[],"relativePath":"cli_statistical_methods.md","filePath":"cli_statistical_methods.md","lastUpdated":1772293878000}`),n={name:"cli_statistical_methods.md"};function l(h,s,p,k,r,o){return a(),t("div",null,[...s[0]||(s[0]=[e(`<h1 id="statistical-methods" tabindex="-1">Statistical Methods <a class="header-anchor" href="#statistical-methods" aria-label="Permalink to &quot;Statistical Methods&quot;">​</a></h1><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to &quot;Overview&quot;">​</a></h2><p>VITALS uses rigorous statistical methods to detect performance regressions. This document explains the mathematical foundations, assumptions, and appropriate usage of each statistical test.</p><h2 id="core-concepts" tabindex="-1">Core Concepts <a class="header-anchor" href="#core-concepts" aria-label="Permalink to &quot;Core Concepts&quot;">​</a></h2><h3 id="hypothesis-testing" tabindex="-1">Hypothesis Testing <a class="header-anchor" href="#hypothesis-testing" aria-label="Permalink to &quot;Hypothesis Testing&quot;">​</a></h3><p>Performance regression testing uses hypothesis testing:</p><p><strong>Null Hypothesis (H₀)</strong>: No performance difference between baseline and candidate <strong>Alternative Hypothesis (H₁)</strong>: Candidate has different performance than baseline</p><p><strong>Type I Error (α)</strong>: False positive - detecting regression when none exists <strong>Type II Error (β)</strong>: False negative - missing actual regression</p><p><strong>Significance Level (α)</strong>: Typically 0.05 (5% false positive rate)</p><h3 id="p-value" tabindex="-1">p-value <a class="header-anchor" href="#p-value" aria-label="Permalink to &quot;p-value&quot;">​</a></h3><p>Probability of observing the data (or more extreme) if null hypothesis is true.</p><p><strong>Interpretation</strong>:</p><ul><li>p &lt; 0.05: Reject null hypothesis, significant difference detected</li><li>p &gt;= 0.05: Fail to reject null hypothesis, no significant difference</li></ul><p><strong>Example</strong>:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">p-value</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.023</span></span></code></pre></div><p>Interpretation: 2.3% probability this difference occurred by chance. Significant at α = 0.05 level.</p><h3 id="effect-size" tabindex="-1">Effect Size <a class="header-anchor" href="#effect-size" aria-label="Permalink to &quot;Effect Size&quot;">​</a></h3><p>Measures practical significance (magnitude of difference).</p><p><strong>Why needed</strong>: Statistical significance ≠ practical significance</p><ul><li>Large samples can detect tiny, meaningless differences</li><li>Effect size quantifies practical importance</li></ul><p><strong>Cohen&#39;s d</strong>: Standardized mean difference</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (mean₁ </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mean₂</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) / pooled_standard_deviation</span></span></code></pre></div><p><strong>Interpretation</strong>:</p><table tabindex="0"><thead><tr><th>Cohen&#39;s d</th><th>Effect</th><th>Practical Meaning</th></tr></thead><tbody><tr><td>0.0 - 0.2</td><td>Negligible</td><td>Not practically significant</td></tr><tr><td>0.2 - 0.5</td><td>Small</td><td>Noticeable to careful observers</td></tr><tr><td>0.5 - 0.8</td><td>Medium</td><td>Noticeable to most users</td></tr><tr><td>0.8+</td><td>Large</td><td>Obvious to everyone</td></tr></tbody></table><h2 id="parametric-tests" tabindex="-1">Parametric Tests <a class="header-anchor" href="#parametric-tests" aria-label="Permalink to &quot;Parametric Tests&quot;">​</a></h2><h3 id="welch-s-t-test" tabindex="-1">Welch&#39;s t-test <a class="header-anchor" href="#welch-s-t-test" aria-label="Permalink to &quot;Welch&#39;s t-test&quot;">​</a></h3><p>Default test for comparing two independent samples.</p><h4 id="mathematical-foundation" tabindex="-1">Mathematical Foundation <a class="header-anchor" href="#mathematical-foundation" aria-label="Permalink to &quot;Mathematical Foundation&quot;">​</a></h4><p><strong>Test Statistic</strong>:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">t</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (x̄₁ </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> x̄₂</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) / √(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">s₁²/n₁</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> +</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> s₂²/n₂</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Where:</p><ul><li>x̄₁, x̄₂: Sample means</li><li>s₁², s₂²: Sample variances</li><li>n₁, n₂: Sample sizes</li></ul><p><strong>Degrees of Freedom</strong> (Welch-Satterthwaite):</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">df</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (s₁²/n₁ </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> s₂²/n₂</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)² / ((s₁²</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">n₁)²</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(n₁</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (s₂²</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">n₂)²</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(n₂</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span></code></pre></div><h4 id="assumptions" tabindex="-1">Assumptions <a class="header-anchor" href="#assumptions" aria-label="Permalink to &quot;Assumptions&quot;">​</a></h4><ol><li><strong>Independence</strong>: Samples are independent</li><li><strong>Normality</strong>: Approximately normal distribution (robust with n &gt; 30)</li><li><strong>No assumption of equal variances</strong> (advantage over Student&#39;s t-test)</li></ol><h4 id="when-to-use" tabindex="-1">When to Use <a class="header-anchor" href="#when-to-use" aria-label="Permalink to &quot;When to Use&quot;">​</a></h4><p><strong>Recommended</strong>:</p><ul><li>Sample sizes n₁, n₂ &gt;= 30</li><li>Approximately normal distributions</li><li>Different variances between groups</li></ul><p><strong>Avoid</strong>:</p><ul><li>Small samples (n &lt; 20) with non-normal data</li><li>Severe outliers</li><li>Highly skewed distributions</li></ul><h4 id="example" tabindex="-1">Example <a class="header-anchor" href="#example" aria-label="Permalink to &quot;Example&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vitals</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> regress</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --baseline</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v1.0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --candidate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v1.1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --test</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> welch</span></span></code></pre></div><p><strong>Output</strong>:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Test:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Welch&#39;s t-test</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">t-statistic: 2.156</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">df: 295.3</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">p-value: 0.032</span></span></code></pre></div><h4 id="implementation-details" tabindex="-1">Implementation Details <a class="header-anchor" href="#implementation-details" aria-label="Permalink to &quot;Implementation Details&quot;">​</a></h4><p>VITALS applies preprocessing before Welch&#39;s test:</p><ol><li><strong>Outlier Removal</strong>: IQR method (Q1 - 1.5×IQR, Q3 + 1.5×IQR)</li><li><strong>Normalization</strong>: Downsample/upsample to n = 50</li><li><strong>Smoothing</strong>: Moving average (window = 3)</li><li><strong>Test</strong>: Welch&#39;s t-test on processed data</li></ol><h2 id="non-parametric-tests" tabindex="-1">Non-Parametric Tests <a class="header-anchor" href="#non-parametric-tests" aria-label="Permalink to &quot;Non-Parametric Tests&quot;">​</a></h2><h3 id="mann-whitney-u-test" tabindex="-1">Mann-Whitney U Test <a class="header-anchor" href="#mann-whitney-u-test" aria-label="Permalink to &quot;Mann-Whitney U Test&quot;">​</a></h3><p>Rank-based non-parametric test.</p><h4 id="mathematical-foundation-1" tabindex="-1">Mathematical Foundation <a class="header-anchor" href="#mathematical-foundation-1" aria-label="Permalink to &quot;Mathematical Foundation&quot;">​</a></h4><p><strong>Algorithm</strong>:</p><ol><li>Combine and rank all observations</li><li>Calculate rank sums for each sample: R₁, R₂</li><li>Calculate U statistics:</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">U₁</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> n₁×n₂</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> +</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> n₁×</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">n₁+1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> R₁</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">U₂</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> n₁×n₂</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> +</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> n₂×</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">n₂+1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> R₂</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">U</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> min</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">U₁,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> U₂</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><ol><li>For large samples, approximate with normal distribution:</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">z</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (U </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> μᵤ</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) / σᵤ</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">where:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">μᵤ</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> n₁×n₂/2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">σᵤ</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> √</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">n₁×n₂×(n₁+n₂+1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/12</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h4 id="assumptions-1" tabindex="-1">Assumptions <a class="header-anchor" href="#assumptions-1" aria-label="Permalink to &quot;Assumptions&quot;">​</a></h4><ol><li><strong>Independence</strong>: Samples are independent</li><li><strong>Ordinal data</strong>: Can be ranked</li><li><strong>No distributional assumptions</strong></li></ol><h4 id="when-to-use-1" tabindex="-1">When to Use <a class="header-anchor" href="#when-to-use-1" aria-label="Permalink to &quot;When to Use&quot;">​</a></h4><p><strong>Recommended</strong>:</p><ul><li>Non-normal distributions</li><li>Presence of outliers</li><li>Small to medium sample sizes</li><li>Skewed distributions</li><li>Ordinal data</li></ul><p><strong>Avoid</strong>:</p><ul><li>When parametric assumptions hold (less power than t-test)</li><li>Extremely small samples (n &lt; 10)</li></ul><h4 id="example-1" tabindex="-1">Example <a class="header-anchor" href="#example-1" aria-label="Permalink to &quot;Example&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vitals</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> regress</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --baseline</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v1.0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --candidate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v1.1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --test</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mann-whitney</span></span></code></pre></div><p><strong>Output</strong>:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Test:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Mann-Whitney</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> U</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">U-statistic:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3421</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">z-score:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -2.156</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">p-value:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.031</span></span></code></pre></div><h4 id="power-comparison" tabindex="-1">Power Comparison <a class="header-anchor" href="#power-comparison" aria-label="Permalink to &quot;Power Comparison&quot;">​</a></h4><p>Mann-Whitney has 95.5% power efficiency compared to t-test when normality holds.</p><p><strong>Trade-off</strong>: Slightly less powerful when assumptions hold, but robust when they don&#39;t.</p><h3 id="permutation-test" tabindex="-1">Permutation Test <a class="header-anchor" href="#permutation-test" aria-label="Permalink to &quot;Permutation Test&quot;">​</a></h3><p>Exact test using resampling.</p><h4 id="mathematical-foundation-2" tabindex="-1">Mathematical Foundation <a class="header-anchor" href="#mathematical-foundation-2" aria-label="Permalink to &quot;Mathematical Foundation&quot;">​</a></h4><p><strong>Algorithm</strong>:</p><ol><li>Calculate observed mean difference: d_obs = |mean₁ - mean₂|</li><li>Combine all observations into single pool</li><li>Randomly split into two groups of size n₁ and n₂</li><li>Calculate mean difference for permuted data: d_perm</li><li>Repeat K times (default: 1000)</li><li>Calculate p-value:</li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">p-value</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (number </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">of</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> d_perm</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> d_obs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) / K</span></span></code></pre></div><h4 id="assumptions-2" tabindex="-1">Assumptions <a class="header-anchor" href="#assumptions-2" aria-label="Permalink to &quot;Assumptions&quot;">​</a></h4><ol><li><strong>Exchangeability</strong>: Under null hypothesis, observations are exchangeable</li><li><strong>Independence</strong>: Samples are independent</li></ol><p>No distributional assumptions required.</p><h4 id="when-to-use-2" tabindex="-1">When to Use <a class="header-anchor" href="#when-to-use-2" aria-label="Permalink to &quot;When to Use&quot;">​</a></h4><p><strong>Recommended</strong>:</p><ul><li>Small sample sizes (n &lt; 20)</li><li>Need exact p-values</li><li>No distributional assumptions can be made</li><li>High-stakes decisions</li><li>Publication-quality analysis</li></ul><p><strong>Avoid</strong>:</p><ul><li>Large samples (computationally expensive)</li><li>Real-time analysis (slow)</li></ul><h4 id="example-2" tabindex="-1">Example <a class="header-anchor" href="#example-2" aria-label="Permalink to &quot;Example&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vitals</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> regress</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --baseline</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v1.0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --candidate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v1.1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --test</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> permutation</span></span></code></pre></div><p><strong>Output</strong>:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Test:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Permutation</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Observed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> difference:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 14.6</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Iterations:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1000</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Extreme</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> count:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 23</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">p-value:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.023</span></span></code></pre></div><h4 id="computational-cost" tabindex="-1">Computational Cost <a class="header-anchor" href="#computational-cost" aria-label="Permalink to &quot;Computational Cost&quot;">​</a></h4><p><strong>Time Complexity</strong>: O(K × n), where K = iterations, n = sample size</p><p><strong>Default</strong>: K = 1000 iterations <strong>Typical runtime</strong>: 100-200ms for n = 50</p><h2 id="automatic-test-selection" tabindex="-1">Automatic Test Selection <a class="header-anchor" href="#automatic-test-selection" aria-label="Permalink to &quot;Automatic Test Selection&quot;">​</a></h2><h3 id="selection-algorithm" tabindex="-1">Selection Algorithm <a class="header-anchor" href="#selection-algorithm" aria-label="Permalink to &quot;Selection Algorithm&quot;">​</a></h3><p>VITALS can automatically choose the most appropriate test:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vitals</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> regress</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --baseline</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v1.0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --candidate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v1.1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --test</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> auto</span></span></code></pre></div><p><strong>Decision Tree</strong>:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> n₁</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 20</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> or</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> n₂</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 20:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> permutation_test</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # Most accurate for small n</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">elif</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> is_normal(sample₁</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) and is_normal(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sample₂</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> welch_test</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          # Efficient for normal data</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">else:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mann_whitney_test</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # Robust for non-normal data</span></span></code></pre></div><h3 id="normality-check" tabindex="-1">Normality Check <a class="header-anchor" href="#normality-check" aria-label="Permalink to &quot;Normality Check&quot;">​</a></h3><p>Simple normality check using skewness and kurtosis:</p><p><strong>Skewness</strong>:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">skewness</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> E[</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">X</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> μ</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">³]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> σ³</span></span></code></pre></div><p><strong>Kurtosis</strong>:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kurtosis</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> E[</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">X</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> μ</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">⁴]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> σ⁴</span></span></code></pre></div><p><strong>Criteria</strong>:</p><ul><li>Normal: |skewness| &lt; 1.0 and |kurtosis - 3| &lt; 1.0</li><li>Non-normal: Otherwise</li></ul><h2 id="effect-size-calculations" tabindex="-1">Effect Size Calculations <a class="header-anchor" href="#effect-size-calculations" aria-label="Permalink to &quot;Effect Size Calculations&quot;">​</a></h2><h3 id="cohen-s-d" tabindex="-1">Cohen&#39;s d <a class="header-anchor" href="#cohen-s-d" aria-label="Permalink to &quot;Cohen&#39;s d&quot;">​</a></h3><p>Standardized mean difference:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (x̄₁ </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> x̄₂</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) / s_pooled</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">where:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">s_pooled</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> √</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">s₁²</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> +</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> s₂²</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p><strong>Implementation</strong>:</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> cohensD</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">sample1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[], </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">sample2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[])</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> mean1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> mean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(sample1);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> mean2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> mean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(sample2);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> var1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> variance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(sample1, mean1);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> var2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> variance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(sample2, mean2);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> pooledStd</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Math.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sqrt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((var1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> var2) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (mean2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> mean1) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pooledStd;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="alternative-effect-sizes" tabindex="-1">Alternative Effect Sizes <a class="header-anchor" href="#alternative-effect-sizes" aria-label="Permalink to &quot;Alternative Effect Sizes&quot;">​</a></h3><h4 id="hedges-g" tabindex="-1">Hedges&#39; g <a class="header-anchor" href="#hedges-g" aria-label="Permalink to &quot;Hedges&#39; g&quot;">​</a></h4><p>Corrects for small sample bias:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">g</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ×</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (1 </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 3/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">4df</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">where</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> df</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> n₁</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> +</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> n₂</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span></span></code></pre></div><p><strong>Use when</strong>: n &lt; 20</p><h4 id="glass-s-δ" tabindex="-1">Glass&#39;s Δ <a class="header-anchor" href="#glass-s-δ" aria-label="Permalink to &quot;Glass&#39;s Δ&quot;">​</a></h4><p>Uses only baseline standard deviation:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Δ</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (x̄₂ </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> x̄₁</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) / s₁</span></span></code></pre></div><p><strong>Use when</strong>: Baseline is gold standard</p><h2 id="bootstrap-methods" tabindex="-1">Bootstrap Methods <a class="header-anchor" href="#bootstrap-methods" aria-label="Permalink to &quot;Bootstrap Methods&quot;">​</a></h2><h3 id="bootstrap-confidence-intervals" tabindex="-1">Bootstrap Confidence Intervals <a class="header-anchor" href="#bootstrap-confidence-intervals" aria-label="Permalink to &quot;Bootstrap Confidence Intervals&quot;">​</a></h3><p>Resampling-based robust confidence intervals.</p><h4 id="algorithm" tabindex="-1">Algorithm <a class="header-anchor" href="#algorithm" aria-label="Permalink to &quot;Algorithm&quot;">​</a></h4><ol><li>For each iteration (default: 1000): <ul><li>Resample sample₁ with replacement → resample₁</li><li>Resample sample₂ with replacement → resample₂</li><li>Calculate mean difference: d_i = mean(resample₂) - mean(resample₁)</li></ul></li><li>Sort all differences: d₁, d₂, ..., d₁₀₀₀</li><li>Calculate percentiles for 95% CI: <ul><li>Lower: 2.5th percentile</li><li>Upper: 97.5th percentile</li></ul></li></ol><h4 id="example-3" tabindex="-1">Example <a class="header-anchor" href="#example-3" aria-label="Permalink to &quot;Example&quot;">​</a></h4><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ci</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> bootstrapConfidenceInterval</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  baseline,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  candidate,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// iterations</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  0.95</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// confidence level</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`95% CI: [\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ci</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">lower</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}, \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ci</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">upper</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}]\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><p><strong>Output</strong>:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">95%</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> CI:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [2.3, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">18.7]</span></span></code></pre></div><p><strong>Interpretation</strong>: 95% confident true mean difference is between 2.3ms and 18.7ms.</p><h4 id="advantages" tabindex="-1">Advantages <a class="header-anchor" href="#advantages" aria-label="Permalink to &quot;Advantages&quot;">​</a></h4><ul><li>No distributional assumptions</li><li>Works with small samples</li><li>Handles skewed distributions</li><li>Provides intuitive intervals</li></ul><h2 id="data-preprocessing" tabindex="-1">Data Preprocessing <a class="header-anchor" href="#data-preprocessing" aria-label="Permalink to &quot;Data Preprocessing&quot;">​</a></h2><h3 id="outlier-detection" tabindex="-1">Outlier Detection <a class="header-anchor" href="#outlier-detection" aria-label="Permalink to &quot;Outlier Detection&quot;">​</a></h3><p>VITALS uses IQR (Interquartile Range) method:</p><p><strong>Algorithm</strong>:</p><ol><li>Calculate Q1 (25th percentile) and Q3 (75th percentile)</li><li>Calculate IQR = Q3 - Q1</li><li>Define bounds: <ul><li>Lower: Q1 - 1.5 × IQR</li><li>Upper: Q3 + 1.5 × IQR</li></ul></li><li>Remove values outside bounds</li></ol><p><strong>Example</strong>:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Data:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [100, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">102,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 105,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 108,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 200,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 103,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 104]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Q1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 102.5,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Q3</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 106.5</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">IQR</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4.0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Lower</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 96.5,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Upper</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 112.5</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Outliers:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [200]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Cleaned:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [100, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">102,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 105,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 108,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 103,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 104]</span></span></code></pre></div><h3 id="normalization" tabindex="-1">Normalization <a class="header-anchor" href="#normalization" aria-label="Permalink to &quot;Normalization&quot;">​</a></h3><p>Standardize sample sizes for consistent comparison:</p><p><strong>Methods</strong>:</p><ol><li><strong>Downsampling</strong>: Randomly select n values</li><li><strong>Upsampling</strong>: Bootstrap resample to n values</li></ol><p><strong>Default</strong>: n = 50</p><p><strong>Purpose</strong>: Eliminate sample size imbalance effects</p><h3 id="smoothing" tabindex="-1">Smoothing <a class="header-anchor" href="#smoothing" aria-label="Permalink to &quot;Smoothing&quot;">​</a></h3><p>Moving average smoothing reduces noise:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">smoothed[i]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (data[i-1] + data[i] + data[i+1]) / 3</span></span></code></pre></div><p><strong>Window size</strong>: 3 (default)</p><p><strong>Purpose</strong>: Reduce high-frequency noise while preserving trends</p><h2 id="power-analysis" tabindex="-1">Power Analysis <a class="header-anchor" href="#power-analysis" aria-label="Permalink to &quot;Power Analysis&quot;">​</a></h2><h3 id="sample-size-requirements" tabindex="-1">Sample Size Requirements <a class="header-anchor" href="#sample-size-requirements" aria-label="Permalink to &quot;Sample Size Requirements&quot;">​</a></h3><p>Required sample size for desired power:</p><p><strong>Formula</strong>:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ×</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (z_α/2 </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> z_β</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)² × σ² / δ²</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">where:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">z_α/2:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Critical</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> value</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> significance</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> level</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">z_β:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Critical</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> value</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> power</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">σ²:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Variance</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">δ:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Minimum</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> detectable</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> difference</span></span></code></pre></div><p><strong>Example</strong>: Detect 10% change with 80% power, α = 0.05</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">σ</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 15</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (ms)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">δ</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 10%</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> of</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 100ms</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 10ms</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ×</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (1.96 </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.84</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)² × 15² / 10²</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ≈</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 71</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> per</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> group</span></span></code></pre></div><h3 id="power-curves" tabindex="-1">Power Curves <a class="header-anchor" href="#power-curves" aria-label="Permalink to &quot;Power Curves&quot;">​</a></h3><p>Power depends on:</p><ul><li>Sample size (n)</li><li>Effect size (d)</li><li>Significance level (α)</li></ul><p><strong>Typical Values</strong>:</p><table tabindex="0"><thead><tr><th>n per group</th><th>d = 0.3</th><th>d = 0.5</th><th>d = 0.8</th></tr></thead><tbody><tr><td>20</td><td>0.15</td><td>0.33</td><td>0.64</td></tr><tr><td>50</td><td>0.30</td><td>0.70</td><td>0.96</td></tr><tr><td>100</td><td>0.52</td><td>0.94</td><td>0.99+</td></tr></tbody></table><p>Power = P(Reject H₀ | H₁ is true)</p><h2 id="common-issues" tabindex="-1">Common Issues <a class="header-anchor" href="#common-issues" aria-label="Permalink to &quot;Common Issues&quot;">​</a></h2><h3 id="multiple-testing" tabindex="-1">Multiple Testing <a class="header-anchor" href="#multiple-testing" aria-label="Permalink to &quot;Multiple Testing&quot;">​</a></h3><p><strong>Problem</strong>: Testing multiple metrics increases false positive rate.</p><p><strong>Family-Wise Error Rate (FWER)</strong>:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">P(at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> least</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> one</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> positive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) = 1 - (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> α</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)^k</span></span></code></pre></div><p>Where k = number of tests.</p><p><strong>Example</strong>: Testing 5 metrics at α = 0.05</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">FWER</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (1 </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.05</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)^5 = 0.226 (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">22.6%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p><strong>Solution</strong>: Bonferroni correction</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">α_adjusted</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> α</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> k</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.05</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.01</span></span></code></pre></div><p><strong>VITALS Approach</strong>: Policy-based thresholds per metric (no adjustment needed)</p><h3 id="sequential-testing" tabindex="-1">Sequential Testing <a class="header-anchor" href="#sequential-testing" aria-label="Permalink to &quot;Sequential Testing&quot;">​</a></h3><p><strong>Problem</strong>: Repeatedly testing during rollout inflates error rate.</p><p><strong>Solution</strong>: Use historical baseline with predefined stopping rules.</p><h3 id="variance-heterogeneity" tabindex="-1">Variance Heterogeneity <a class="header-anchor" href="#variance-heterogeneity" aria-label="Permalink to &quot;Variance Heterogeneity&quot;">​</a></h3><p><strong>Problem</strong>: Unequal variances between samples.</p><p><strong>Solution</strong>: Welch&#39;s t-test (doesn&#39;t assume equal variances) or Mann-Whitney U.</p><h2 id="validation" tabindex="-1">Validation <a class="header-anchor" href="#validation" aria-label="Permalink to &quot;Validation&quot;">​</a></h2><h3 id="test-correctness" tabindex="-1">Test Correctness <a class="header-anchor" href="#test-correctness" aria-label="Permalink to &quot;Test Correctness&quot;">​</a></h3><p>VITALS statistical tests validated against:</p><ul><li>R statistical package</li><li>SciPy (Python)</li><li>Published test statistics</li></ul><p><strong>Coverage</strong>: Unit tests with known distributions and expected results.</p><h3 id="robustness-testing" tabindex="-1">Robustness Testing <a class="header-anchor" href="#robustness-testing" aria-label="Permalink to &quot;Robustness Testing&quot;">​</a></h3><p>Tests validated with:</p><ul><li>Normal distributions</li><li>Non-normal distributions (log-normal, exponential)</li><li>Small samples (n = 10)</li><li>Large samples (n = 1000)</li><li>High variance</li><li>Outliers</li></ul><h2 id="references" tabindex="-1">References <a class="header-anchor" href="#references" aria-label="Permalink to &quot;References&quot;">​</a></h2><h3 id="academic-literature" tabindex="-1">Academic Literature <a class="header-anchor" href="#academic-literature" aria-label="Permalink to &quot;Academic Literature&quot;">​</a></h3><ol><li>Welch, B. L. (1947). &quot;The generalization of &#39;Student&#39;s&#39; problem when several different population variances are involved&quot;</li><li>Mann, H. B., &amp; Whitney, D. R. (1947). &quot;On a test of whether one of two random variables is stochastically larger&quot;</li><li>Cohen, J. (1988). &quot;Statistical Power Analysis for the Behavioral Sciences&quot;</li><li>Good, P. (2005). &quot;Permutation, Parametric, and Bootstrap Tests of Hypotheses&quot;</li></ol><h3 id="implementation-references" tabindex="-1">Implementation References <a class="header-anchor" href="#implementation-references" aria-label="Permalink to &quot;Implementation References&quot;">​</a></h3><ul><li>NumPy statistical functions</li><li>SciPy hypothesis testing</li><li>R statistical computing</li></ul><h2 id="see-also" tabindex="-1">See Also <a class="header-anchor" href="#see-also" aria-label="Permalink to &quot;See Also&quot;">​</a></h2><ul><li><a href="./cli_regression_testing">CLI Regression Testing</a></li><li><a href="./cli_policy_engine">Policy-as-Code Engine</a></li><li><a href="./cicd_integration">CI/CD Integration</a></li></ul>`,196)])])}const F=i(n,[["render",l]]);export{g as __pageData,F as default};
